<!DOCTYPE html>













<html class="theme-next pisces" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">











<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.7.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/favicon-48.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16.png?v=6.7.0">


  <link rel="mask-icon" href="/images/icons/logo.svg?v=6.7.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.7.0',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: true,
    fastclick: true,
    lazyload: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  


<!--站长验证-->




  <meta name="description" content="介绍操作系统os(operating system),通用目的的软件程序  硬件驱动进程管理内存管理网络管理安全管理文件管理  安装linux linux发行版企业多用红帽(redhat)的centos 个人电脑推荐kde桌面的manjaro或mint分区和启动:硬盘MBR分区(主引导记录)他有自己的启动器最大支持2tbuefi的GPT分区:逐渐代替MBR标准主分区 一块硬盘最多4个,不能划分更小">
<meta name="keywords" content="linux基础">
<meta property="og:type" content="article">
<meta property="og:title" content="linux知识框架">
<meta property="og:url" content="https://hubhack.github.io/linux/linux知识框架/index.html">
<meta property="og:site_name" content="千分无言">
<meta property="og:description" content="介绍操作系统os(operating system),通用目的的软件程序  硬件驱动进程管理内存管理网络管理安全管理文件管理  安装linux linux发行版企业多用红帽(redhat)的centos 个人电脑推荐kde桌面的manjaro或mint分区和启动:硬盘MBR分区(主引导记录)他有自己的启动器最大支持2tbuefi的GPT分区:逐渐代替MBR标准主分区 一块硬盘最多4个,不能划分更小">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-08-22T04:34:15.029Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="linux知识框架">
<meta name="twitter:description" content="介绍操作系统os(operating system),通用目的的软件程序  硬件驱动进程管理内存管理网络管理安全管理文件管理  安装linux linux发行版企业多用红帽(redhat)的centos 个人电脑推荐kde桌面的manjaro或mint分区和启动:硬盘MBR分区(主引导记录)他有自己的启动器最大支持2tbuefi的GPT分区:逐渐代替MBR标准主分区 一块硬盘最多4个,不能划分更小">




  <link rel="canonical" href="https://hubhack.github.io/linux/linux知识框架/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>linux知识框架 | 千分无言</title>
  






  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?xxxxxxxxxxxxx";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">千分无言</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">人生苦短 我用python</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>我的首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-rui-site">

    
    
    
      
    

    

    <a href="https://hubhack.github.io/python-book/" rel="section"><i class="menu-item-icon fa fa-fw fa-paper-plane"></i> <br>Python</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>博客分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-docs">

    
    
    
      
    

    

    <a href="/docs/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i> <br>技术书库</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>文章标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-address-card"></i> <br>关于作者</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>全站搜索</a>
        </li>
		
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result">
    
      <div style="text-align: center;padding: 3px 0 0;">
       <div style="margin-top: 20px;font-size: 18px;font-weight: 600;border-bottom: 1px solid #ccc;">
         <i class="fa fa-history" aria-hidden="true"></i>
         近期文章
       </div>
       <ul style="margin: 0;padding: 0;list-style: none;">
         
         
           <li>
             <a href="/面试考点/" title="面试考点" target="_blank">面试考点</a>
           </li>
         
           <li>
             <a href="/数据库/redis/" title="数据库事务隔离本质" target="_blank">数据库事务隔离本质</a>
           </li>
         
           <li>
             <a href="/网络/IO多种概念/" title="理解IO" target="_blank">理解IO</a>
           </li>
         
           <li>
             <a href="/数据库/数据库事务隔离本质/" title="数据库事务隔离本质" target="_blank">数据库事务隔离本质</a>
           </li>
         
           <li>
             <a href="/web/Restful API设计最佳实践/" title="restful设计" target="_blank">restful设计</a>
           </li>
         
           <li>
             <a href="/爬虫/爬虫实战2-分布式异步爬虫/" title="分布式爬虫" target="_blank">分布式爬虫</a>
           </li>
         
           <li>
             <a href="/爬虫/爬虫实战 - 模拟登陆oschina/" title="模拟登录" target="_blank">模拟登录</a>
           </li>
         
           <li>
             <a href="/爬虫/爬虫/" title="爬虫概述" target="_blank">爬虫概述</a>
           </li>
         
           <li>
             <a href="/爬虫/爬虫 -- Scrapy框架/" title="scrapy" target="_blank">scrapy</a>
           </li>
         
           <li>
             <a href="/爬虫/爬虫 -- HTML解析、Json解析/" title="http解析, json解析" target="_blank">http解析, json解析</a>
           </li>
         
           <li>
             <a href="/爬虫/动态网页处理 -- Selenium和PhantomJS/" title="动态网页处理" target="_blank">动态网页处理</a>
           </li>
         
           <li>
             <a href="/web/WSGI/" title="WSGI" target="_blank">WSGI</a>
           </li>
         
           <li>
             <a href="/中间件/RabbitMQ/" title="RabbitMQ" target="_blank">RabbitMQ</a>
           </li>
         
           <li>
             <a href="/linux/CentOS7使用firewalld打开关闭防火墙与端口/" title="vmware" target="_blank">vmware</a>
           </li>
         
           <li>
             <a href="/linux/新手如何安装及配置VMware Workstation虚拟机及Xshell远程管理软件/" title="vmware" target="_blank">vmware</a>
           </li>
         
       </ul>
      </div>
    
  </div>
</div>



    </div>
  

</nav>



  



</div>
    </header>

    
  
  
  
    
      
    
    <a href="https://github.com/hubhack/hubhack.github.io" class="github-corner" target="_blank" title="万水千山总是情,给个star行不行！" aria-label="万水千山总是情,给个star行不行！"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#222; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg>
    
      </a>
    



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://hubhack.github.io/linux/linux知识框架/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="mwq">
      <meta itemprop="description" content="IT知识共享,与各位共同学习">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="千分无言">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                linux知识框架<a href="https://github.com/hubhack/hubhack.github.io/tree/dev/source/_posts/linux/linux知识框架.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pencil"></i></a>

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          
          
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><h2 id="操作系统"><a href="#操作系统" class="headerlink" title="操作系统"></a>操作系统</h2><p>os(operating system),通用目的的软件程序</p>
<blockquote>
<p>硬件驱动<br>进程管理<br>内存管理<br>网络管理<br>安全管理<br>文件管理</p>
</blockquote>
<h2 id="安装linux"><a href="#安装linux" class="headerlink" title="安装linux"></a>安装linux</h2><blockquote>
<p>linux发行版企业多用红帽(redhat)的centos 个人电脑推荐kde桌面的<a href="https://www.manjaro.cn/153" target="_blank" rel="noopener">manjaro</a>或<a href="https://www.linuxmint.com/download.php" target="_blank" rel="noopener">mint</a><br>分区和启动:<br>硬盘MBR分区(主引导记录)他有自己的启动器最大支持2tb<br>uefi的GPT分区:逐渐代替MBR标准<br>主分区 一块硬盘最多4个,不能划分更小,最小单位<br>扩展分区:一块硬盘最多一个,不能直接创建文件系统<br>安装过程大同小异 <a href="https://blog.csdn.net/python_lqx/article/details/88670425" target="_blank" rel="noopener">详细步骤</a><br>需要注意的是如何分区:这里的分区在虚拟机上只是虚拟的,分100g不影响物理硬盘实际占用.实际情况要自己斟酌.<br>/dev/sda 100g<br>/dev/sda1 /boot mountpoint  1g<br>/dev/sda2 /                50g<br>/dev/sda3 /data            20g<br>/dev/sda5 /swap             2g</p>
</blockquote>
<h2 id="开发接口标准"><a href="#开发接口标准" class="headerlink" title="开发接口标准"></a>开发接口标准</h2><blockquote>
<p>ABI:application binary interface ABI描述了程序与os之间的底层接口<br>API:application programming interface<br>开源协议: GPLv2,GPLv3 Apache BSD Mozilla Mit</p>
</blockquote>
<h2 id="用户和内核空间"><a href="#用户和内核空间" class="headerlink" title="用户和内核空间"></a>用户和内核空间</h2><blockquote>
<p>username 用户程序的运行空间 为了安全,他们是隔离的即使用户的程序崩溃,内核也不受影响<br>内核空间:kernel space</p>
</blockquote>
<h2 id="linux哲学思想"><a href="#linux哲学思想" class="headerlink" title="linux哲学思想"></a>linux哲学思想</h2><p>在linux上一切皆文件,其实就是硬盘也是以文件格式展示出来的</p>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><p>文件和目录被组织成单根倒置树结构<br>文件系统从根目录下开始,用”/“表示<br>proc虚拟的,在硬盘上不存在<br>文件 区别大小写( 这是文件系统决定,微软的ntfs不存在,而linux的ext4大小写敏感)<br>以.开头的文件为隐藏文件<br>元数据:metadata(包含属性,权限,大小)每个文件都有自己的元数据,有指针指向到数据的真实内容.<br>数据:data(内容在硬盘上)<br>文件系统分成结构:LSB<br>文件名最长255个字节,文件系统不一样大小不一样<br>包括路径在内文件名称最长4095个字节<br>蓝色—目录 绿色—可执行文件  红色—压缩文件<br>浅蓝色—链接文件 灰色—其他文件 粉色是socket(套接字文件)双向传递<br>管道文件 p开头(pipe)单工传输</p>
<h2 id="文件系统结构元素"><a href="#文件系统结构元素" class="headerlink" title="文件系统结构元素"></a>文件系统结构元素</h2><p>/boot：引导文件存放目录，内核文件(vmlinuz)、引导加载器(bootloader, grub)都存放于此目录<br>/bin：供所有用户使用的基本命令；不能关联至独立分区，OS启动即会用到的 程序<br>/sbin：管理类的基本命令；不能关联至独立分区，OS启动即会用到的程序<br>/lib：启动时程序依赖的基本共享库文件以及内核模块文件(/lib/modules)<br>/lib64：专用于x86_64系统上的辅助共享库文件存放位置<br>/etc：配置文件目录<br>/home/USERNAME：普通用户家目录<br>/root：管理员的家目录<br>/media：便携式移动设备挂载点<br>/mnt：临时文件系统挂载点<br>/dev：设备文件及特殊文件存储位置  b: block device，随机访问  c: character device，线性访问<br>/opt：第三方应用程序的安装位置<br>/srv：系统上运行的服务用到的数据<br>/tmp：临时文件存储位置<br>/proc: 用于输出内核与进程信息相关的虚拟文件系统<br>/sys：用于输出当前系统上硬件设备相关信息虚拟文件系统<br>/selinux: security enhanced Linux，selinux相关的安全策略等信息的存储位置文<br>/usr: universal shared, read-only data  bin: 保证系统拥有完整功能而提供的应用程序<br>sbin:  lib：32位使用  lib64：只存在64位系统<br>include: C程序的头文件(header files)<br>share：结构化独立的数据，例如doc, man等<br>local：第三方应用程序的安装位置 bin, sbin, lib, lib64, etc, share 文</p>
<p>/var: variable data files  cache: 应用程序缓存数据目录<br>lib: 应用程序状态信息数据<br>local：专用于为/usr/local下的应用程序存储可变数据<br>lock: 锁文件  log: 日志目录及文件<br>opt: 专用于为/opt下的应用程序存储可变数据<br>run: 运行中的进程相关数据,通常用于存储进程pid文件<br>spool: 应用程序数据池<br>tmp: 保存系统两次重启之间产生的临时数据</p>
<h2 id="Linux下的文件类型"><a href="#Linux下的文件类型" class="headerlink" title="Linux下的文件类型"></a>Linux下的文件类型</h2><p>-：普通文件<br>d: 目录文件<br>b: 块设备(硬盘,以块为单位,有缓存,一块一块写,有缓存区)<br>c: 字符设备(设备主要以字符为单位,键盘为主)<br>l: 符号链接文件<br>p: 管道文件pipe<br>s: 套接字文件socket</p>
<h3 id="显示当前工作目录"><a href="#显示当前工作目录" class="headerlink" title="显示当前工作目录"></a>显示当前工作目录</h3><p>每个shell和系统进程都有一个当前的工作目录<br>CWD:current work directory<br>显示当前shell CWD的绝对路径 pwd: printing working directory -P 显示真实物理路径 -L 显示链接路径（默认）</p>
<h3 id="更改目录"><a href="#更改目录" class="headerlink" title="更改目录"></a>更改目录</h3><p>cd  改变目录 使用绝对或相对路径： cd /home/wang/        cd home/wang 切换至父目录：  cd .. 切换至当前用户主目录： cd 切换至以前的工作目录： cd -<br>选项：-P<br>相关的环境变量：  PWD：当前目录路径   OLDPWD：上一次目录路径</p>
<h3 id="列出目录内容"><a href="#列出目录内容" class="headerlink" title="列出目录内容"></a>列出目录内容</h3><p>列出当前目录的内容或指定目录<br>用法：ls [options] [ files_or_dirs ]<br>示例: ls -a 包含隐藏文件 ls -l 显示额外的信息 ls -R  目录递归通过 ls -ld  目录和符号链接信息 ls -1  文件分行显示 ls –S  按从大到小排序 ls –t   按mtime排序 ls –u   配合-t选项，显示并按atime从新到旧排序<br>ls –U  按目录存放顺序显示 ls –X  按文件后缀排序</p>
<blockquote>
<p>[root@centos7 sysconfig]# ll /etc/motd<br>-rw-r–r–. 1 root root 15 Mar 21 03:19 /etc/motd<br>[root@centos7 sysconfig]# ll ../motd<br>-rw-r–r–. 1 root root 15 Mar 21 03:19 ../motd<br>-a 全部<br>-r 递归<br>ll 是别名 (ls -l)</p>
</blockquote>
<h3 id="查看文件状态"><a href="#查看文件状态" class="headerlink" title="查看文件状态"></a>查看文件状态</h3><p>stat<br>文件：metadata, data<br>三个时间戳: access time：访问时间，atime，读取文件内容<br>modify time: 修改时间,<br>mtime，改变文件内容（数据） change time: 改变时间, ctime，元数据发生改变<br>data 时间不会一直更新<br>通配符* 任意字符<br>二进制查看hexdump -C</p>
<h3 id="创建和查看文件"><a href="#创建和查看文件" class="headerlink" title="创建和查看文件"></a>创建和查看文件</h3><p>touch 命令是个外部命令<br>[]表示其中一个字母<br>[^  ]表示除去其中字符的任意字符<br>两个大于号比 touch安全</p>
<h3 id="文件统配符"><a href="#文件统配符" class="headerlink" title="文件统配符"></a>文件统配符</h3><p>man 7 glob</p>
<h3 id="复制和转移删除文件"><a href="#复制和转移删除文件" class="headerlink" title="复制和转移删除文件"></a>复制和转移删除文件</h3><p>cp [OPTION]… [-T] SOURCE DEST外部命令 现在的cp是别名 元数据会丢失<br>原始命令前加\<br>拷贝文件夹 -r(递归)<br>cp 有可能丢失数据不能用rmdir删除</p>
<p>data是个挂载点<br>cp [OPTION]… SOURCE… DIRECTORY cp [OPTION]… -t DIRECTORY SOURCE… cp SRC DEST SRC是文件：如果目标不存在：新建DEST，并将SRC中内容填充至DEST中      如果目标存在： 如果DEST是文件：将SRC中的内容覆盖至DEST中  基于安全，建议为cp命令使用-i选项 如果DEST是目录：在DEST下新建与原文件同名的文件，并将SRC中内容填 充至新文件中<br>cp SRC… DEST    SRC…：多个文件<br>DEST必须存在，且为目录，其它情形均会出错；cp SRC DEST<br>SRC是目录：此时使用选项：-r<br>如果DEST不存在：则创建指定目录，复制SRC目录中所有文件至DEST中；<br>如果DEST存在：<br>如果DEST是文件：报错<br>如果DEST是目录：<br>inode（index node）表中包含文件系统所有文件列表<br>一个节点 （索引节点）是在一个表项，包含有关文件的信息（ 元数据 ），包 括：  文件类型，权限，UID，GID  链接数（指向这个文件名路径名称个数）  该文件的大小和不同的时间戳  指向磁盘上文件的数据块指针  有关文件的其他数据 </p>
<p>inode 唯一标识在元数据里<br>删除其实删的元数据.删文件比建文件快多了</p>
<h3 id="软和硬链接"><a href="#软和硬链接" class="headerlink" title="软和硬链接"></a>软和硬链接</h3><p>硬链接<br>创建硬链接会增加额外的记录项以引用文件<br>对应于同一文件系统上一个物理文件<br>每个目录引用相同的inode号<br>创建时链接数递增<br>删除文件时：<br>rm命令递减计数的链接<br>文件要存在，至少有一个链接数<br>当链接数为零时，该文件被删除<br>不能跨越驱动器或分区<br>语法:  ln filename  [linkname ]<br>软连接<br>一个符号文件链接指向一个文件<br>ls -s显示链接的名称和应用的文件<br>一个符号链接的内容是他引用文件的名称<br>可以对目录进行<br>可以跨分区<br>指向的是另一个文件的路径;其大小为指向的路径字符串的长度;不增加或减少目标文件inode的引用计数<br>语法:ln -s 文件 链接名</p>
<h2 id="i-0-重定向至文件"><a href="#i-0-重定向至文件" class="headerlink" title="i/0 重定向至文件"></a>i/0 重定向至文件</h2><p>程序:指令+数据<br>input 和output<br>打开的文件都有一个fd:file descrptor(文件描述符)<br>linux 给程序提供三种i/o设备<br>标准输入(STDIN)-0 默认接受来自键盘的输入<br>标准输出(STDOUT) -1默认输出到终端窗口<br>标准错误(STDERR) -2 默认输出到窗口<br>i/o重定向:改变默认位置<br>语法:命令  操作符号 文件名<br>操作符&gt;把STDOUT重定向到文件<br>2&gt; 把STDERR重定向到文件<br>$&gt; 把所有输出重定向到文件<br>tr 转换和删除字符</p>
<h2 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h2><p>管道用来连接命令<br>命令1|命令2|命令3<br>将命令1的STDOUT发送给命令2的STDIN,命令2的STDOUT发送给命令3的STDIN<br>less 一页一页地查看输入<br>重定向到多个目标(tee)<br>把命令1的STDOUT保存在文件中,作为命令2的输入<br>-a追加<br>使用:<br>保存不同阶段的输入<br>复杂管道的故障排除<br>同时查看和记录输出</p>
<h1 id="用户组权限"><a href="#用户组权限" class="headerlink" title="用户组权限"></a>用户组权限</h1><h2 id="用户user"><a href="#用户user" class="headerlink" title="用户user"></a>用户user</h2><p>令牌token,identity<br>linux用户:username/UID<br>管理员:root,0<br>普通用户:1-65535<br>系统用户:1-499,1-999<br>对守护进程获取资源进行权限进行分配<br>登录用户:500+,1000<br>交互式登录<br>nologin 是软件启动没有用户登录</p>
<h2 id="组group"><a href="#组group" class="headerlink" title="组group"></a>组group</h2><p>linux:Groupname/GID<br>管理员:<br>系统 :1-499,1-999<br>普通组:500+,1000+<br>安全上下文:<br>进行中的程序:程序(process)<br>以进程发起者的身份运行:<br>root:/bin/cat<br>mage:/bin/cat<br>组的类别<br>用户的主要组:<br>用户必须属于一个且只有一个主组<br>组名同用户名,且包含一个用户,私有组<br>用户和组的配置文件<br>/etc/passwd:用户及其属性信息<br>/etc/group:组及其属性信息<br>/etc/shadow:用户密码及其相关属性<br>/etc/gshadow:组密码及其相关属性<br>passwd文件格式<br>login name:登录用名<br>passwd:密码<br>UID:用户身份编号<br>GID:登录默认所在组编号<br>GECOS:用户全名或注释<br>home diretory:用户主目录<br>shell:用户默认使用shell<br>shadow文件格式<br>useradd usermod userdel<br>组账号维护命令:groupadd<br>groupmod groupdel</p>
<h2 id="用户创建-useradd"><a href="#用户创建-useradd" class="headerlink" title="用户创建:useradd"></a>用户创建:useradd</h2><p>useradd [options]LOGIN<br>-u UID<br>-o 配合-u选项,不检查UID的唯一性<br>-g GID:指明用户所属基本组,可谓组名,也可以GID<br>-c “COMMENT”:用户的注释信息<br>默认设置:/etc/default/useradd文件中<br>删除用户:userdel -r删除用户目录</p>
<h2 id="查看用户相关的ID信息"><a href="#查看用户相关的ID信息" class="headerlink" title="查看用户相关的ID信息"></a>查看用户相关的ID信息</h2><p>id [OPTIONS]…[USER]<br>-u :显示UID<br>-g :显示GID<br>-G :显示用户所属的组的ID<br>-n :显示名称,需配合ugG使用</p>
<h2 id="切换用户或以其他用户身份执行命令"><a href="#切换用户或以其他用户身份执行命令" class="headerlink" title="切换用户或以其他用户身份执行命令"></a>切换用户或以其他用户身份执行命令</h2><p>su[options] [-] [user[args…]]<br>切换用户的方式<br>ssh root@ip<br>curl ww<br>service network restat</p>
<h2 id="设置密码"><a href="#设置密码" class="headerlink" title="设置密码"></a>设置密码</h2><p>passwd<br>常用选项：<br> -d:删除指定用户密码<br> -l:锁定指定用户<br> -u:解锁指定用户<br> -e:强制用户下次登录修改密码<br> -f: 强制操作<br> -n mindays: 指定最短使用期限<br> -x maxdays：最大使用期限<br> -w warndays：提前多少天开始警告<br> -i inactivedays：非活动期限<br> –stdin：从标准输入接收用户密码<br> echo “PASSWORD” | passwd –stdin USERNAME</p>
<h2 id="创建组"><a href="#创建组" class="headerlink" title="创建组"></a>创建组</h2><p>groupadd[option]…group_name<br>-g GID:指明GID号:<br>-r:创建系统组<br>修改和删除组:<br>组属性修改:groupmod<br>组删除:groupdel<br>组密码:gpasswd<br>newgrp命令:临时切换主组<br>chown设置文件的所有者<br>chgrp设置文件的属组信息<br>修改文件的属主和属组chown<br>修改文件的属组:chgrp</p>
<h2 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h2><p>文件的权限主要针对三类对象进行定义<br>owner: 属主, u<br>group: 属组, g<br>other: 其他, o<br>每个文件针对每类访问者都定义了三种权限<br>r: Readable<br>w: Writable<br>x: eXcutable</p>
<h3 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h3><p>chmod [OPTION]… OCTAL-MODE FILE…<br> -R: 递归修改权限<br>chmod [OPTION]… MODE[,MODE]… FILE…<br> MODE：<br> 修改一类用户的所有权限：<br> u= g= o= ug= a= u=,g=<br> 修改一类用户某位或某些位权限<br> u+ u- g+ g- o+ o- a+ a- + -<br>chmod [OPTION]… –reference=RFILE FILE…<br>参考RFILE文件的权限，将FILE的修改为同RFILE<br>数字权限法:chmod数字 file<br>rwx r-x r– file<br>其中：</p>
<p>u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。</p>
<ul>
<li>表示增加权限、- 表示取消权限、= 表示唯一设定权限。<br>r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。<br>其他参数说明：</li>
</ul>
<p>-c : 若该文件权限确实已经更改，才显示其更改动作<br>-f : 若该文件权限无法被更改也不要显示错误讯息<br>-v : 显示权限变更的详细资料<br>-R : 对目前目录下的所有文件与子目录进行相同的权限变更(即以递回的方式逐个变更)<br>–help : 显示辅助说明<br>–version : 显示版本</p>
<h1 id="文本工具"><a href="#文本工具" class="headerlink" title="文本工具"></a>文本工具</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>文件内容:less和cat<br>文件截取:head和tail<br>按列抽取:cut<br>按关键字抽取:grep<br>文件查看:cat tac rev<br>分页查看:more<br>一页一页的查看:less<br>less 命令是man命令使用的分页器</p>
<h3 id="显示文本前后或后行内容"><a href="#显示文本前后或后行内容" class="headerlink" title="显示文本前后或后行内容"></a>显示文本前后或后行内容</h3><p>head[option]…[FILE]默认看文本前10行,配合管道可以看命令前两行<br>tail[option]…[FILE]看文本尾<br>tail-f 跟踪看日志<br>cut命令取字段<br>past 横着合并文件<br>wc 收集文本</p>
<h3 id="文本排序sort"><a href="#文本排序sort" class="headerlink" title="文本排序sort"></a>文本排序sort</h3><p>把整理过的文本显示在STDOUT,不改变原始文件<br>sort[opiton]file(s)<br>uniq:从输入中删除前后相接的重复的行,处理日志<br>liunx:文本处理三剑客<br>grep:文本过滤,文本搜索 逐行匹配符合条件的字符 现在用的grep是个别名 输出变红<br>sed:stream editor, 文本编辑工具<br>awk:liunx上的实现gawk,文本报告生成器<br>grep作用:文本搜索工具,根据用户指定的模式对目标文本逐行进行匹配检查;打印匹配到行</p>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p>匹配次数:用在要指定次数的字符后面,用于指定前面字符的次数<br>位置锚定:定位<br>正则字符特殊 元字符<br>.单个任意字符<br>[abc]表示其中一个字符<br>[^abc]除去abc任意字母<br>[:lower:]小写<br>[:upper:]大写<br>分组方式<br>abc{3}\<br>搜索替代工具<br>grep过滤特定行,sed也可以并且编辑修改文件</p>
<h2 id="vim编辑器"><a href="#vim编辑器" class="headerlink" title="vim编辑器"></a>vim编辑器</h2><p>vi:visual interface 文本编辑器<br>文本:asscii ,unicode<br>文本编辑种类:<br>行编辑器:sed<br>全屏编辑器:nano,vi<br>vim -viimproved<br>其他编辑器<br>gedit 一个简单的图形编辑器<br>gvim 一个vim编辑器的图形版本<br>vi一开始是vim的别名<br>vim有三种模式:normal(普通) insert(插入) extendcommand(命令)<br>normal :默认模式,移动光标,剪切/粘贴文本<br>insert :修改文本<br>extend command:保存,退出</p>
<h3 id="搜索替代"><a href="#搜索替代" class="headerlink" title="搜索替代"></a>搜索替代</h3><p>/ :从当前光标所在处向文件尾部查找<br>? :从当前光标所在处向文件首部查找<br>n :与命令同方向<br>N :与命令反方向<br>处理文本的工具sed<br>stream editor 行编辑器<br>sed是一种编辑器,他一次处理一行内容.处理时,把当前处理的行存储在临时缓冲区中,称为”模式空间”,接着用sed命令处理缓冲区的内容,处理完成后,把缓冲区的内容送往屏幕.然后读入下行,执行下一个循环.如果没有使诸如’D’的特殊命令,那会在两个循环之间清空模式空间,但不会清空保留空间.这样不断重复,直到文件末尾.文件内容并没有改变,除非你使用重定向存储输出.<br>vim不适合修改大批量文件,sed可以<br>sed 配合管道可以使用<br>awk 语言<br>sed ‘’ passwd<br>‘地址命令’地址不写代表全部文件 命令不写代表输出</p>
<h1 id="软件管理"><a href="#软件管理" class="headerlink" title="软件管理"></a>软件管理</h1><h2 id="包管理器"><a href="#包管理器" class="headerlink" title="包管理器"></a>包管理器</h2><p>rpm 打包文件 不需要考虑部署 安装路径都定义好<br>二进制应用程序的组成部分:二进制文件、库文件、配置文件、帮助文件<br>程序包管理器：<br>debian：deb文件, dpkg包管理器<br>redhat: rpm文件, rpm包管理器<br>rpm: Redhat Package Manager   RPM  Package Manager<br>源代码：name-VERSION.tar.gz|bz2|xz  VERSION: major.minor.release<br>rpm包命名方式:name-VERSION-release.arch.rpm<br>例：bash-4.2.46-19.el7.x86_64.rpm  VERSION: major.minor.release  release：release.OS<br>常见的arch：  x86: i386, i486, i586, i686  x86_64: x64, x86_64, amd64  powerpc: ppc  跟平台无关：noarch</p>
<p>包：分类和拆包<br>Application-VERSION-ARCH.rpm: 主包<br>Application-devel-VERSION-ARCH.rpm 开发子包  Application-utils-VERSION-ARHC.rpm 其它子包  Application-libs-VERSION-ARHC.rpm 其它子包<br>包之间：可能存在依赖关系，甚至循环依赖<br>解决依赖包管理<br>工具:yum：rpm包管理器的前端工具  apt-get：deb包管理器前端工具  zypper: suse上的rpm前端管理工具  dnf: Fedora 18+ rpm包管理器前端管理工具 npm:nodejs包管理工具</p>
<p>查看二进制程序所依赖的库文件  ldd /PATH/TO/BINARY_FILE<br>管理及查看本机装载的库文件  ldconfig 加载库文件  /sbin/ldconfig -p: 显示本机已经缓存的所有可用库文件名及文件 路径映射关系  配置文件：/etc/ld.so.conf, /etc/ld.so.conf.d/*.conf  缓存文件：/etc/ld.so.cache</p>
<h3 id="程序包管理器"><a href="#程序包管理器" class="headerlink" title="程序包管理器"></a>程序包管理器</h3><p>功能：将编译好的应用程序的各组成文件打包一个或几个程序包文件,从而方便快捷地实现程序包的安装、卸载、查询、升级和校验等管理操作.<br>包文件组成 (每个包独有)<br>RPM包内的文件 RPM的元数据，如名称，版本，依赖性，描述等.<br>安装或卸载时运行的脚本<br>数据库(公共)：/var/lib/rpm 程序包名称及版本  依赖关系  功能说明  包安装后生成的各文件路径及校验码信息<br>管理程序包的方式:使用包管理器：rpm  使用前端工具：yum, dnf<br>获取程序包的途径：<br>(1) 系统发版的光盘或官方的服务器;CentOS镜像:<a href="https://www.centos.org/download/" target="_blank" rel="noopener">https://www.centos.org/download/</a>   <a href="http://mirrors.aliyun.com" target="_blank" rel="noopener">http://mirrors.aliyun.com</a>   <a href="http://mirrors.sohu.com" target="_blank" rel="noopener">http://mirrors.sohu.com</a>   <a href="http://mirrors.163.com" target="_blank" rel="noopener">http://mirrors.163.com</a><br>(2) 项目官方站点程序包的来源<br>(3) 第三方组织:Fedora-EPEL:Extra Packages for Enterprise Linux  Rpmforge:RHEL推荐，包很全 搜索引擎:<a href="http://pkgs.org" target="_blank" rel="noopener">http://pkgs.org</a> <a href="http://rpmfind.net" target="_blank" rel="noopener">http://rpmfind.net</a>   <a href="http://rpm.pbone.net" target="_blank" rel="noopener">http://rpm.pbone.net</a> <a href="https://sourceforge.net/" target="_blank" rel="noopener">https://sourceforge.net/</a><br>(4) 自己制作 注意：第三方包建议要检查其合法性  来源合法性,程序包的完整性</p>
<ul>
<li><p>rpm包管理<br>CentOS系统上使用rpm命令管理程序包:安装、卸载、升级、查询、校验、数据库维护  安装：<br>rpm {-i|–install} [install-options] PACKAGE_FILE…<br> -v: verbose<br> -h: 以#显示程序包管理执行进度  rpm -ivh PACKAGE_FILE …</p>
</li>
<li><p>rpm包安装<br>[install-options]<br>–test: 测试安装，但不真正执行安装，即dry run模式<br>–nodeps：忽略依赖关系<br>–replacepkgs | replacefiles<br>–nosignature: 不检查来源合法性<br>–nodigest：不检查包完整性<br>–noscripts：不执行程序包脚本   %pre: 安装前脚本；<br>–nopre   %post: 安装后脚本；<br>–nopost   %preun: 卸载前脚本；<br>–nopreun   %postun: 卸载后脚本；  –nopostun</p>
</li>
<li><p>rpm包升级<br>升级：rpm {-U|–upgrade} [install-options] PACKAGE_FILE…<br>rpm {-F|–freshen} [install-options] PACKAGE_FILE…<br>upgrade：安装有旧版程序包，则“升级”<br>如果不存在旧版程序包，则“安装”<br>freshen：安装有旧版程序包，则“升级”<br>如果不存在旧版程序包，则不执行升级操作  rpm -Uvh PACKAGE_FILE …  rpm -Fvh PACKAGE_FILE …<br>–oldpackage：降级<br>–force: 强制安装</p>
</li>
<li><p>升级注意项<br>注意：<br>(1) 不要对内核做升级操作；Linux支持多内核版本并存，因此，对直接安装新版 本内核 (2) 如果原程序包的配置文件安装后曾被修改，升级时，新版本的提供的同一个配 置文件并不会直接覆盖老版本的配置文件，而把新版本的文件重命名 (FILENAME.rpmnew)后保留</p>
</li>
<li><p>包查询<br>rpm {-q|–query} [select-options] [query-options] [select-options]<br>-a: 所有包<br>-f: 查看指定的文件由哪个程序包安装生成<br>-p rpmfile：针对尚未安装的程序包文件做查询操作<br>–whatprovides CAPABILITY：查询指定的CAPABILITY由哪个包所提供  –whatrequires CAPABILITY：查询指定的CAPABILITY被哪个包所依赖<br>rpm2cpio 包文件|cpio –itv  预览包内文件 rpm2cpio 包文件|cpio –id  “*.conf” 释放包内文件</p>
</li>
<li><p>常用查询用法：  -qi PACKAGE, -qf FILE, -qc PACKAGE, -ql PACKAGE, -qd PACKAGE  -qpi PACKAGE_FILE, -qpl PACKAGE_FILE, …  -qa<br>包卸载：  rpm {-e|–erase} [–allmatches] [–nodeps] [–noscripts] [–notriggers] [–test] PACKAGE_NAME …</p>
</li>
</ul>
<p>包校验<br>rpm {-V|–verify} [select-options] [verify-options]  S file Size differs  M Mode differs (includes permissions and file type)  5 digest (formerly MD5 sum) differs  D Device major/minor number mismatch  L readLink(2) path mismatch  U User ownership differs  G Group ownership differs  T mTime differs  P capabilities differ<br>包校验<br>包来源合法性验正及完整性验正<br>完整性验正：SHA256<br>来源合法性验正：RSA 公钥加密<br>对称加密：加密、解密使用同一密钥<br>非对称加密：密钥是成对儿的<br>public key: 公钥，公开所有人</p>
<ul>
<li>rpm数据库<br>数据库重建：  /var/lib/rpm rpm {–initdb|–rebuilddb}  initdb: 初始化   如果事先不存在数据库，则新建之   否则，不执行任何操作  rebuilddb：重建已安装的包头的数据库索引目录</li>
</ul>
<h2 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h2><p>CentOS: yum, dnf YUM: Yellowdog Update Modifier，rpm的前端程序，可解决软件包相关依 赖性，可在多个库之间定位软件包，up2date的替代工具  yum repository: yum repo，存储了众多rpm包，以及包的相关的元数据 文件（放置于特定目录repodata下）  文件服务器: http:// https://   ftp://   file:// </p>
<ul>
<li>yum配置文件<br>yum客户端配置文件:/etc/yum.conf：为所有仓库提供公共配置  /etc/yum.repos.d/*.repo：为仓库的指向提供配置<br>仓库指向的定义：   [repositoryID]   name=Some name for this repository   baseurl=url://path/to/repository/   enabled={1|0}   gpgcheck={1|0}   gpgkey=URL   enablegroups={1|0}   failovermethod={roundrobin|priority}    roundrobin：意为随机挑选，默认值    priority:按顺序访问   cost=   默认为1000</li>
<li>yum仓库<br>yum的repo配置文件中可用的变量：  $releasever: 当前OS的发行版的主版本号  $arch: 平台，i386,i486,i586,x86_64等  $basearch：基础平台；i386, x86_64  $YUM0-$YUM9:自定义变量 实例:  <a href="http://server/centos/$releasever/$basearch/http://server/centos/7/x86_64" target="_blank" rel="noopener">http://server/centos/$releasever/$basearch/http://server/centos/7/x86_64</a>  <a href="http://server/centos/6/i384" target="_blank" rel="noopener">http://server/centos/6/i384</a><br>yum源<br>阿里云repo文件:<a href="http://mirrors.aliyun.com/repo/" target="_blank" rel="noopener">http://mirrors.aliyun.com/repo/</a><br>CentOS系统的yum源 阿里云：<a href="https://mirrors.aliyun.com/centos/$releasever/os/x86_64/" target="_blank" rel="noopener">https://mirrors.aliyun.com/centos/$releasever/os/x86_64/</a><br>EPEL的yum源:阿里云：<a href="https://mirrors.aliyun.com/epel/$releasever/x86_64" target="_blank" rel="noopener">https://mirrors.aliyun.com/epel/$releasever/x86_64</a> </li>
</ul>
<h3 id="yum命令"><a href="#yum命令" class="headerlink" title="yum命令"></a>yum命令</h3><p>yum命令的用法：  yum [options] [command] [package …]<br>显示仓库列表：  yum repolist [all|enabled|disabled]<br>显示程序包：  yum list  yum list [all | glob_exp1] [glob_exp2] […]  yum list {available|installed|updates} [glob_exp1] […] 安装程序包：  yum install package1 [package2] […]  yum reinstall package1 [package2] […]  (重新安装)<br>yum命令<br>升级程序包：  yum update [package1] [package2] […]  yum downgrade package1 [package2] […] (降级)<br>检查可用升级：  yum check-update<br>卸载程序包：  yum remove | erase package1 [package2] […]<br>yum命令<br>查看程序包information：  yum info […]<br>查看指定的特性(可以是某文件)是由哪个程序包所提供：  yum provides | whatprovides feature1 [feature2] […]<br>清理本地缓存：  清除/var/cache/yum/$basearch/$releasever缓存  yum clean [ packages | metadata | expire-cache | rpmdb | plugins | all ]<br>构建缓存：  yum makecache<br>yum命令<br>搜索：yum search string1 [string2] […]  以指定的关键字搜索程序包名及summary信息<br>查看指定包所依赖的capabilities：  yum deplist package1 [package2] […]<br>查看yum事务历史：  yum history [info|list|packages-list|packages-info|  summary|addon-info|redo|undo|  rollback|new|sync|stats]  yum history  yum history info 6  yum history undo 6<br>日志 ：/var/log/yum.log<br>安装及升级本地程序包:yum localinstall rpmfile1 [rpmfile2] <a href="用install替代">…</a><br>yum localupdate rpmfile1 [rpmfile2] […] (用update替代)<br>包组管理的相关命令：  yum groupinstall group1 [group2] […]   groupupdate group1 [group2] […]   yum grouplist [hidden] [groupwildcard] […]   yum groupremove group1 [group2] […]   yum groupinfo group1 […]<br>yum命令<br>yum的命令行选项：  –nogpgcheck：禁止进行gpg check  -y: 自动回答为“yes”  -q：静默模式  –disablerepo=repoidglob：临时禁用此处指定的repo  –enablerepo=repoidglob：临时启用此处指定的repo  –noplugins：禁用所有插件<br>系统光盘yum仓库<br>系统安装光盘作为本地yum仓库：<br>(1) 挂载光盘至某目录，例如/mnt/cdrom   mount /dev/cdrom /mnt/cdrom<br>(2) 创建配置文件   [CentOS7]   name=   baseurl=   gpgcheck=   enabled= 创建yum仓库：  createrepo [options] <directory></directory></p>
<h3 id="程序包编译"><a href="#程序包编译" class="headerlink" title="程序包编译"></a>程序包编译</h3><p>程序包编译安装： Application-VERSION-release.src.rpm –&gt; 安装后，使用rpmbuild命令制作 成二进制格式的rpm包，而后再安装 源代码–&gt;预处理–&gt;编译–&gt;汇编–&gt;链接–&gt;执行<br>源代码组织格式：  多文件：文件中的代码之间，很可能存在跨文件依赖关系  C、C++：make 项目管理器   configure脚本 –&gt; Makefile.in –&gt; Makefile  java: maven</p>
<h2 id="C语言源代码编译安装三步骤"><a href="#C语言源代码编译安装三步骤" class="headerlink" title="C语言源代码编译安装三步骤:"></a>C语言源代码编译安装三步骤:</h2><p>1、./configure(1)通过选项传递参数，指定启用特性、安装路径等；执行时会参考用户的 指定以及Makefile.in文件生成Makefile(2)检查依赖到的外部环境，如依赖的软包 2、make  根据Makefile文件，构建应用程序<br>3、make install  复制文件到相应路径<br>开发工具:autoconf: 生成configure脚本 automake：生成Makefile.in<br>注意：安装前查看INSTALL，README</p>
<p>开源程序源代码的获取:官方自建站点:apache.org (ASF：Apache Software    Foundation) mariadb.org 代码托管:SourceForge.net  Github.com      code.google.com<br>c/c++编译器: gcc (GNU C Complier)</p>
<p>编译C源代码：  准备：提供开发工具及开发环境   开发工具：make, gcc等   开发环境：开发库，头文件    glibc：标准库  实现：通过“包组”提供开发组件   Development Tools   Server Platform Development</p>
<p>第一步：configure脚本 选项：指定安装位置、指定启用的特性 –help: 获取其支持使用的选项  选项分类：安装路径设定:–prefix=/PATH: 指定默认安装位置,默认为/usr/local/–sysconfdir=/PATH：配置文件安装位置System types:支持交叉编译</p>
<p>Optional Features: 可选特性 –disable-FEATURE  –enable-FEATURE[=ARG] Optional Packages: 可选包 –with-PACKAGE[=ARG],依赖包    –without-PACKAGE,禁用依赖关系 注意：通常被编译操作依赖的程序包，需要安装此程序包的“开发”组件， 其包名一般类似于name-devel-VERSION</p>
<p>第二步：make 第三步：make install</p>
<p>安装后的配置：<br>(1) 二进制程序目录导入至PATH环境变量中   编辑文件/etc/profile.d/NAME.sh export PATH=/PATH/TO/BIN:$PATH<br>(2) 导入帮助手册  编辑/etc/man.config|man_db.conf文件 添加一个MANPATH</p>
<h1 id="shell编程"><a href="#shell编程" class="headerlink" title="shell编程"></a>shell编程</h1><h2 id="基础-1"><a href="#基础-1" class="headerlink" title="基础"></a>基础</h2><p>程序：指令+数据<br>程序编程风格：<br>        过程式：以指令为中心，数据服务于指令<br>        对象式：以数据为中心，指令服务于数据<br>        shell程序：提供了编程能力，解释执行</p>
<h3 id="编程基本概念"><a href="#编程基本概念" class="headerlink" title="编程基本概念"></a>编程基本概念</h3><p>编程逻辑处理方式：<br>顺序执行<br>循环执行<br>选择执行</p>
<h3 id="shell编程：过程式、解释执行"><a href="#shell编程：过程式、解释执行" class="headerlink" title="shell编程：过程式、解释执行"></a>shell编程：过程式、解释执行</h3><p>编程语言的基本结构：<br>各种系统命令的组合<br>数据存储：变量、数组<br>表达式: a + b<br>语句:if<br>shell脚本基础<br>shell脚本:<br>包含一些命令或声明，并符合一定格式的文本文件<br>格式要求:首行shebang机制</p>
<blockquote>
<p>#!/bin/bash</p>
<p>#!/usr/bin/python</p>
<p>#!/usr/bin/perl<br>shell脚本的用途有：<br>自动化常用命令</p>
</blockquote>
<p>执行系统管理和故障排除</p>
<p>创建简单的应用程序</p>
<p>处理文本或文件</p>
<h3 id="添加注释"><a href="#添加注释" class="headerlink" title="添加注释"></a>添加注释</h3><p>注释以#开头<br>第二步：运行脚本<br>给予执行权限，在命令行上指定脚本的绝对或相对路径<br>直接运行解释器，将脚本作为解释器程序的参数运行</p>
<h3 id="脚本规范"><a href="#脚本规范" class="headerlink" title="脚本规范"></a>脚本规范</h3><p>脚本代码开头约定<br>1、第一行一般为调用使用的语言<br>2、程序名，避免更改文件名为无法找到正确的文件<br>3、版本号<br>4、更改后的时间<br>5、作者相关信息<br>6、该程序的作用，及注意事项<br>7、最后是各版本的更新简要说明</p>
<p>脚本调试<br>检测脚本中的语法错误<br>bash -n /path/to/some_script<br>调试执行<br>bash -x /path/to/some_script</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>变量：命名的内存空间<br>数据存储方式：<br>字符：<br>数值：整型，浮点型<br>变量：变量类型<br>作用：<br>1、数据存储格式<br>2、参与的运算<br>3、表示的数据范围<br>类型：<br>字符<br>数值：整型、浮点型<br>变量命名法则：<br>1、不能使程序中的保留字：例如 if, for<br>2、只能使用数字、字母及下划线，且不能以数字开头<br>3、见名知义<br>4、统一命名规则：驼峰命名法，建议大写</p>
<ul>
<li>bash中变量的种类<br>根据变量的生效范围等标准划分下面变量类型：<pre><code>局部变量：生效范围为当前shell进程；对当前shell之外的其它shell进程，
</code></pre>包括当前shell的子shell进程均无效<pre><code>环境（全局）变量：生效范围为当前shell进程及其子进程
本地变量：生效范围为当前shell进程中某代码片断，通常指函数
位置变量：$1, $2, ...来表示，用于让脚本在脚本代码中调用通过命令行传
</code></pre>递给它的参数<pre><code>特殊变量：$?, $0, $*, $@, $#,$$
</code></pre></li>
<li><p>局部变量<br>变量赋值：name=‘value’<br>可以使用引用value:<br>(1) 可以是直接字串; name=“root”<br>(2) 变量引用：name=”$USER”<br>(3) 命令引用：name=<code>COMMAND</code> name=$(COMMAND)<br>变量引用：${name} $name<br>“”：弱引用，其中的变量引用会被替换为变量值<br>‘’：强引用，其中的变量引用不会被替换为变量值，而保持原字符串<br>显示已定义的所有变量：set<br>删除变量：unset name</p>
</li>
<li><p>环境变量<br>bash内建的环境变量：<br>PATH<br>SHELL<br>USER<br>UID<br>HOME<br>PWD<br>SHLVL<br>LANG<br>MAIL<br>HOSTNAME<br>HISTSIZE<br>—</p>
</li>
</ul>
<h3 id="只读和位置变量"><a href="#只读和位置变量" class="headerlink" title="只读和位置变量"></a>只读和位置变量</h3><p>只读变量：只能声明，但不能修改和删除<br>声明只读变量：<br>        readonly name<br>        declare -r name<br>查看只读变量：<br>        readonly –p<br>位置变量：在脚本代码中调用通过命令行传递给脚本的参数<br>$1, $2, …：对应第1、第2等参数，shift [n]换位置<br>$0: 命令本身<br>$<em>: 传递给脚本的所有参数，全部参数合为一个字符串<br>$@: 传递给脚本的所有参数，每个参数为独立字符串<br>$#: 传递给脚本的参数的个数<br>$@ $</em> 只在被双引号包起来的时候才会有差异<br>set – 清空所有位置变量</p>
<ul>
<li>退出状态<br>进程使用退出状态来报告成功或失败<br>• 0 代表成功，1－255代表失败<br>• $? 变量保存最近的命令退出状态<br>例如：<br>ping -c1 -W1 hostdown &amp;&gt; /dev/null<br>echo $?<br>退出状态码<br>bash自定义退出状态码<br>exit [n]：自定义退出状态码<br>注意：脚本中一旦遇到exit命令，脚本会立即终止；终止退出状态取决于exit命<br>令后面的数字<br>注意：如果未给脚本指定退出状态码，整个脚本的退出状态码取决于脚本中执<br>行的最后一条命令的状态码</li>
</ul>
<h2 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h2><p>bash中的算术运算:help let<br>+, -, <em>, /, %取模（取余）, **（乘方）<br>实现算术运算：<br>(1) let var=算术表达式<br>(2) var=$[算术表达式]<br>(3) var=$((算术表达式))<br>(4) var=$(expr arg1 arg2 arg3 …)<br>(5) declare –i var = 数值<br>(6) echo ‘算术表达式’ | bc<br>乘法符号有些场景中需要转义，如</em><br>bash有内建的随机数生成器：RANDOM（0-32767）<br>echo $[$RANDOM%50] ：0-49之间随机数<br>赋值</p>
<ul>
<li>增强型赋值：<br>+=, -=, *=, /=, %=<br>let varOPERvalue<br>例如:let count+=3<br>自加3后自赋值<br>自增，自减：<pre><code>let var+=1
let var++
let var-=1
let var--
</code></pre></li>
<li><p>逻辑运算<br>true, false<br>1, 0</p>
<pre><code>与：
1 与 1 = 1
1 与 0 = 0
0 与 1 = 0
0 与 0 = 0
或:
1 或 1 = 1
1 或 0 = 1
0 或 1 = 1
0 或 0 = 0
非：！
! 1 = 0
! 0 = 1
</code></pre></li>
<li><p>短路运算</p>
</li>
<li><p>短路与<br>第一个为0，结果必定为0<br>第一个为1，第二个必须要参与运算</p>
</li>
<li>短路或<br>第一个为1，结果必定为1<br>第一个为0，第二个必须要参与运算</li>
<li>异或：^<br>异或的两个值,相同为假，不同为真</li>
<li>条件测试<br>判断某需求是否满足，需要由测试机制来实现<br>专用的测试表达式需要由测试命令辅助完成测试过程<br>评估布尔声明，以便用在条件性执行中<br>• 若真，则返回0<br>• 若假，则返回1</li>
<li>测试命令：<br>• test EXPRESSION<br>• [ EXPRESSION ]<br>• [[ EXPRESSION ]]<br>注意：EXPRESSION前后必须有空白字符<br>bash的数值测试<br>-v VAR<br>变量VAR是否设置</li>
<li><p>数值测试：<br>-gt 是否大于<br>-ge 是否大于等于<br>-eq 是否等于<br>-ne 是否不等于<br>-lt 是否小于<br>-le 是否小于等于<br>bash的字符串测试</p>
</li>
<li><p>字符串测试:</p>
</li>
</ul>
<blockquote>
<p>== 是否等于<br>ascii码是否大于ascii码<br>&lt; 是否小于<br>!= 是否不等于<br>=~ 左侧字符串是否能够被右侧的PATTERN所匹配<br>注意: 此表达式一般用于[[ ]]中；扩展的正则表达式<br>-z “STRING“ 字符串是否为空，空为真，不空为假<br>-n “STRING“ 字符串是否不空，不空为真，空为假<br>注意：用于字符串比较时的用到的操作数都应该使用引号<br>Bash的文件测试</p>
</blockquote>
<ul>
<li>存在性测试</li>
</ul>
<p>-a FILE：同-e<br>-e FILE: 文件存在性测试，存在为真，否则为假<br>存在性及类别测试<br>-b FILE：是否存在且为块设备文件<br>-c FILE：是否存在且为字符设备文件<br>-d FILE：是否存在且为目录文件<br>-f FILE：是否存在且为普通文件<br>-h FILE 或 -L FILE：存在且为符号链接文件<br>-p FILE：是否存在且为命名管道文件<br>-S FILE：是否存在且为套接字文件<br>Bash的文件权限测试</p>
<ul>
<li>文件权限测试：<br>-r FILE：是否存在且可读<br>-w FILE: 是否存在且可写<br>-x FILE: 是否存在且可执行</li>
<li>文件特殊权限测试：<br>-u FILE：是否存在且拥有suid权限<br>-g FILE：是否存在且拥有sgid权限<br>-k FILE：是否存在且拥有sticky权限<br>Bash的文件属性测试</li>
<li>文件大小测试：<br>-s FILE: 是否存在且非空<br>文件是否打开：<br>-t fd: fd 文件描述符是否在某终端已经打开<br>-N FILE：文件自从上一次被读取之后是否被修改过<br>-O FILE：当前有效用户是否为文件属主<br>-G FILE：当前有效用户是否为文件属组<br>Bash的文件属性测试</li>
<li>双目测试：<br>FILE1 -ef FILE2: FILE1是否是FILE2的硬链接<br>FILE1 -nt FILE2: FILE1是否新于FILE2（mtime）<br>FILE1 -ot FILE2: FILE1是否旧于FILE2</li>
</ul>
<p>使用read命令来接受输入<br>使用read来把输入值分配给一个或多个shell变量<br>-p 指定要显示的提示<br>-s 静默输入，一般用于密码<br>-n N 指定输入的字符长度N<br>-d ‘字符’ 输入结束符<br>-t N TIMEOUT为N秒<br>read 从标准输入中读取值，给每个单词分配一个变量<br>所有剩余单词都被分配给最后一个变量<br>read -p “Enter a filename: “ FILE</p>
<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><p>过程式编程语言：<br>        顺序执行<br>        选择执行<br>        循环执行<br>条件选择if语句</p>
<ul>
<li>选择执行:</li>
</ul>
<p>注意：if语句可嵌套<br>单分支<br>        if 判断条件;then<br>        条件为真的分支代码<br>        fi<br>双分支<br>        if 判断条件; then<br>        条件为真的分支代码<br>        else<br>条件为假的分支代码<br>fi</p>
<ul>
<li><p>多分支</p>
<pre><code>if 判断条件1; then
条件为真的分支代码
elif 判断条件2; then
条件为真的分支代码
elif 判断条件3; then
条件为真的分支代码
else
以上条件都为假的分支代码
fi
</code></pre><p>逐条件进行判断，第一次遇为“真”条件时，执行其分支，而后结束整个if语句</p>
</li>
<li><p>条件判断：case语句</p>
<pre><code>case 变量引用 in
PAT1)
分支1
;;
PAT2)
分支2
;;
...
*)
默认分支
;;
esac
</code></pre></li>
</ul>
<p>case支持glob风格的通配符：<br>        *: 任意长度任意字符<br>        ?: 任意单个字符<br>        []：指定范围内的任意单个字符<br>        a|b: a或b</p>
<ul>
<li>循环</li>
</ul>
<p>循环执行<br>将某代码段重复运行多次<br>重复运行多少次：<br>循环次数事先已知<br>循环次数事先未知<br>有进入条件和退出条件<br>for, while, until<br>for循环<br>for 变量名 in 列表;do<br>循环体<br>done<br>执行机制：<br>依次将列表中的元素赋值给“变量名”; 每次赋值后即执行一次循环体; 直<br>到列表中的元素耗尽，循环结束</p>
<ul>
<li>for循环<br>列表生成方式：<br>(1) 直接给出列表<br>(2) 整数列表：<br>(a) {start..end}<br>(b) $(seq [start [step]] end)<br>(3) 返回列表的命令<br>$(COMMAND)<br>(4) 使用glob，如：<em>.sh<br>(5) 变量引用；<br>$@, $</em><br>while循环<br>while CONDITION; do<br>循环体<br>done<br>CONDITION：循环控制条件；进入循环之前，先做一次判断；每一次循环之后<br>会再次做判断；条件为“true”，则执行一次循环；直到条件测试状态为<br>“false”终止循环<br>因此：CONDTION一般应该有循环控制变量；而此变量的值会在循环体不断地<br>被修正<br>进入条件：CONDITION为true<br>退出条件：CONDITION为false<br>until循环<br>until CONDITION; do<br>循环体<br>done<br>进入条件： CONDITION 为false<br>退出条件： CONDITION 为true<br>循环控制语句continue<br>用于循环体中<br>ontinue [N]：提前结束第N层的本轮循环，而直接进入下一轮判断；最内层为<br>第1层<br>while CONDTIITON1; do<br>CMD1<br>…<br>if CONDITION2; then<br>continue<br>fi<br>CMDn<br>…<br>done<br>循环控制语句break<br>用于循环体中<br>break [N]：提前结束第N层循环，最内层为第1层<br>while CONDTIITON1; do<br>CMD1<br>…<br>if CONDITION2; then<br>break<br>fi<br>CMDn<br>…<br>done<br>特殊用法<br>双小括号方法，即((…))格式，也可以用于算术运算<br>双小括号方法也可以使bash Shell实现C语言风格的变量操作<br>I=10<br>((I++))<br>for循环的特殊格式：<br>for ((控制变量初始化;条件判断表达式;控制变量的修正表达式))<br>do</li>
<li>循环体<br>done<br>控制变量初始化：仅在运行到循环代码段时执行一次<br>控制变量的修正表达式：每轮循环结束会先进行控制变量修正运算，而后再做<br>条件判断</li>
</ul>
<h2 id="函数介绍"><a href="#函数介绍" class="headerlink" title="函数介绍"></a>函数介绍</h2><p>函数function是由若干条shell命令组成的语句块，实现代码重用和模块化编程<br>它与shell程序形式上是相似的，不同的是它不是一个单独的进程，不能独立运<br>行，而是shell程序的一部分<br>函数和shell程序比较相似，区别在于：<br>Shell程序在子Shell中运行<br>而Shell函数在当前Shell中运行。因此在当前Shell中，函数可以对shell中变<br>量进行修改<br>定义函数<br>函数由两部分组成：函数名和函数体<br>help function<br>语法一：<br>f_name （）{<br>…函数体…<br>}<br> 语法二：<br>function f_name {<br>…函数体…<br>}<br> 语法三：<br>function f_name （） {<br>…函数体…<br>}</p>
<ul>
<li>函数使用<br>函数的定义和使用：<br>可在交互式环境下定义函数<br>可将函数放在脚本文件中作为它的一部分<br>可放在只包含函数的单独文件中<br>调用：函数只有被调用才会执行<br>调用：给定函数名<br>函数名出现的地方，会被自动替换为函数代码<br>函数的生命周期：被调用时创建，返回时终止函数返回值<br>函数有两种返回值：<br>函数的执行结果返回值：<br>(1) 使用echo等命令进行输出<br>(2) 函数体中调用命令的输出结果<br>函数的退出状态码：<br>(1) 默认取决于函数中执行的最后一条命令的退出状态码<br>(2) 自定义退出状态码，其格式为：<br>return 从函数中返回，用最后状态命令决定返回值<br>return 0 无错误返回。<br>return 1-255 有错误返回<br>交互式环境下定义和使用函数</li>
</ul>
<blockquote>
<p>示例:<br>dir() {<br>ls -l<br>}<br>定义该函数后，若在$后面键入dir，其显示结果同ls -l的作用相同<br>dir<br>该dir函数将一直保留到用户从系统退出，或执行了如下所示的unset命令<br>unset dir<br>在脚本中定义及使用函数<br>函数在使用前必须定义，因此应将函数定义放在脚本开始部分，直至shell首次发现它<br>后才能使用<br>调用函数仅使用其函数名即可<br>示例：<br>cat func1<br>!/bin/bash<br>func1<br>hello()<br>{<br>echo “Hello there today’s date is <code>date +%F</code>“<br>}<br>echo “now going to the function hello”<br>hello<br>echo “back from the function”<br>使用函数文件<br>可以将经常使用的函数存入函数文件，然后将函数文件载入shell<br>文件名可任意选取，但最好与相关任务有某种联系。例如：functions.main<br>一旦函数文件载入shell，就可以在命令行或脚本中调用函数。可以使用set<br>命令查看所有定义的函数，其输出列表包括已经载入shell的所有函数<br>若要改动函数，首先用unset命令从shell中删除函数。改动完毕后，再重新<br>载入此文件</p>
</blockquote>
<ul>
<li>创建函数文件</li>
</ul>
<p>函数文件示例：</p>
<blockquote>
<p>cat functions.main</p>
<p>#!/bin/bash</p>
<p>#functions.main<br>findit()<br>{<br>if [ $# -lt 1 ] ; then<br>echo “Usage:findit file”<br>return 1<br>fi<br>find / -name $1 –print<br>}</p>
</blockquote>
<ul>
<li><p>载入函数<br>函数文件已创建好后，要将它载入shell<br>定位函数文件并载入shell的格式：<br>. filename 或 source filename<br>注意：此即&lt;点&gt; &lt;空格&gt; &lt;文件名&gt;<br>这里的文件名要带正确路径</p>
</li>
<li><p>检查载入函数<br>使用set命令检查函数是否已载入。set命令将在shell中显示所有的载入函数</p>
</li>
</ul>
<blockquote>
<p>示例：<br>set<br>findit=( )<br>{<br>if [ $# -lt 1 ]; then<br>echo “usage :findit file”;<br>return 1<br>fi<br>find / -name $1 -print<br>}</p>
</blockquote>
<ul>
<li>执行shell函数<br>要执行函数，简单地键入函数名即可<br>示例：<br>findit groups<br>/usr/bin/groups<br>/usr/local/backups/groups.bak</li>
<li>删除shell函数<br>现在对函数做一些改动后，需要先删除函数，使其对shell不可用。使用unset命<br>令完成删除函数<br>命令格式为：<br>unset function_name<br>示例：<br>unset findit<br>再键入set命令，函数将不再显示</li>
<li>函数参数<br>函数可以接受参数：<br>传递参数给函数：调用函数时，在函数名后面以空白分隔给定参数列表即可；<br>例如“testfunc arg1 arg2 …”<br>在函数体中当中，可使用$1, $2, …调用这些参数；还可以使用$@, $*, $#<br>等特殊变量<br>函数变量<br>变量作用域：<br>环境变量：当前shell和子shell有效<br>本地变量：只在当前shell进程有效，为执行脚本会启动专用子shell进程；<br>因此，本地变量的作用范围是当前shell脚本程序文件，包括脚本中的函数<br>局部变量：函数的生命周期；函数结束时变量被自动销毁<br>注意：如果函数中有局部变量，如果其名称同本地变量，使用局部变量<br>在函数中定义局部变量的方法<br>local NAME=VALUE<br>函数递归示例</li>
<li>函数递归：<br>函数直接或间接调用自身<br>注意递归层数<br>递归实例：<br>阶乘是基斯顿·卡曼于 1808 年发明的运算符号，是数学术语<br>一个正整数的阶乘（factorial）是所有小于及等于该数的正整数的积，并且有0的<br>阶乘为1，自然数n的阶乘写作n!<br>n!=1×2×3×…×n<br>阶乘亦可以递归方式定义：0!=1，n!=(n-1)!×n<br>n!=n(n-1)(n-2)…1<br>n(n-1)! = n(n-1)(n-2)!<br>函数递归示例:</li>
</ul>
<blockquote>
<pre><code>示例：fact.sh

fact() {
if [ $1 -eq 0 -o $1 -eq 1 ]; then
echo 1
else
echo $[$1*$(fact $[$1-1])]
fi
}
fact $1
</code></pre></blockquote>
<ul>
<li>fork炸弹</li>
</ul>
<p>fork炸弹是一种恶意程序，它的内部是一个不断在fork进程的无限循环，实质是<br>一个简单的递归程序。由于程序是递归的，如果没有任何限制，这会导致这个<br>简单的程序迅速耗尽系统里面的所有资源<br>函数实现<br>:(){ :|:&amp; };:<br>bomb() { bomb | bomb &amp; }; bomb  实际上: 代表bomb<br>脚本实现</p>
<blockquote>
<p>cat Bomb.sh<br>./$0|./$0&amp;</p>
</blockquote>

      
    </div>

    
    
    

    
      


    
    
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>感谢支持 ！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById(&quot;QR&quot;); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>赞赏</span>
  </button>
  <div id="QR" style="display: none;">

    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.png" alt="mwq 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        
      </div>
    

    
      <div class="post-tags">
        
          <a href="/tags/linux基础/" rel="tag"><i class="fa fa-tag"></i> linux基础</a>
        
      </div>
    
    
    

    <footer class="post-footer">
      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/linux/linux命令整理(3)/" rel="next" title="linux命令整理(3)">
                <i class="fa fa-chevron-left"></i> linux命令整理(3)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/python/python pep/" rel="prev" title="python pep">
                python pep <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="mwq">
            
              <p class="site-author-name" itemprop="name">mwq</p>
              <p class="site-description motion-element" itemprop="description">IT知识共享,与各位共同学习</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">79</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">30</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          
          
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://hubhack.github.io/python-book/" title="导航 &rarr; https://hubhack.github.io/python-book/"><i class="fa fa-fw fa-paper-plane"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://github.com/hubhack" title="GitHub &rarr; https://github.com/hubhack" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="mailto:2329259856@qq.com" title="E-Mail &rarr; mailto:2329259856@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
              
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
             </div>
          

          
          

          

          
            
          
          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#介绍"><span class="nav-number">1.</span> <span class="nav-text">介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#操作系统"><span class="nav-number">1.1.</span> <span class="nav-text">操作系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装linux"><span class="nav-number">1.2.</span> <span class="nav-text">安装linux</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开发接口标准"><span class="nav-number">1.3.</span> <span class="nav-text">开发接口标准</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户和内核空间"><span class="nav-number">1.4.</span> <span class="nav-text">用户和内核空间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linux哲学思想"><span class="nav-number">1.5.</span> <span class="nav-text">linux哲学思想</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件操作"><span class="nav-number">1.6.</span> <span class="nav-text">文件操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件系统结构元素"><span class="nav-number">1.7.</span> <span class="nav-text">文件系统结构元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux下的文件类型"><span class="nav-number">1.8.</span> <span class="nav-text">Linux下的文件类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#显示当前工作目录"><span class="nav-number">1.8.1.</span> <span class="nav-text">显示当前工作目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更改目录"><span class="nav-number">1.8.2.</span> <span class="nav-text">更改目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列出目录内容"><span class="nav-number">1.8.3.</span> <span class="nav-text">列出目录内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看文件状态"><span class="nav-number">1.8.4.</span> <span class="nav-text">查看文件状态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建和查看文件"><span class="nav-number">1.8.5.</span> <span class="nav-text">创建和查看文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件统配符"><span class="nav-number">1.8.6.</span> <span class="nav-text">文件统配符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#复制和转移删除文件"><span class="nav-number">1.8.7.</span> <span class="nav-text">复制和转移删除文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#软和硬链接"><span class="nav-number">1.8.8.</span> <span class="nav-text">软和硬链接</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#i-0-重定向至文件"><span class="nav-number">1.9.</span> <span class="nav-text">i/0 重定向至文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#管道"><span class="nav-number">1.10.</span> <span class="nav-text">管道</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#用户组权限"><span class="nav-number">2.</span> <span class="nav-text">用户组权限</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#用户user"><span class="nav-number">2.1.</span> <span class="nav-text">用户user</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组group"><span class="nav-number">2.2.</span> <span class="nav-text">组group</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户创建-useradd"><span class="nav-number">2.3.</span> <span class="nav-text">用户创建:useradd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看用户相关的ID信息"><span class="nav-number">2.4.</span> <span class="nav-text">查看用户相关的ID信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#切换用户或以其他用户身份执行命令"><span class="nav-number">2.5.</span> <span class="nav-text">切换用户或以其他用户身份执行命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#设置密码"><span class="nav-number">2.6.</span> <span class="nav-text">设置密码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建组"><span class="nav-number">2.7.</span> <span class="nav-text">创建组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件权限"><span class="nav-number">2.8.</span> <span class="nav-text">文件权限</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改文件权限"><span class="nav-number">2.8.1.</span> <span class="nav-text">修改文件权限</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文本工具"><span class="nav-number">3.</span> <span class="nav-text">文本工具</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基础"><span class="nav-number">3.1.</span> <span class="nav-text">基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#显示文本前后或后行内容"><span class="nav-number">3.1.1.</span> <span class="nav-text">显示文本前后或后行内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文本排序sort"><span class="nav-number">3.1.2.</span> <span class="nav-text">文本排序sort</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#正则表达式"><span class="nav-number">3.2.</span> <span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vim编辑器"><span class="nav-number">3.3.</span> <span class="nav-text">vim编辑器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#搜索替代"><span class="nav-number">3.3.1.</span> <span class="nav-text">搜索替代</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#软件管理"><span class="nav-number">4.</span> <span class="nav-text">软件管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#包管理器"><span class="nav-number">4.1.</span> <span class="nav-text">包管理器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#程序包管理器"><span class="nav-number">4.1.1.</span> <span class="nav-text">程序包管理器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yum"><span class="nav-number">4.2.</span> <span class="nav-text">yum</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#yum命令"><span class="nav-number">4.2.1.</span> <span class="nav-text">yum命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#程序包编译"><span class="nav-number">4.2.2.</span> <span class="nav-text">程序包编译</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#C语言源代码编译安装三步骤"><span class="nav-number">4.3.</span> <span class="nav-text">C语言源代码编译安装三步骤:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell编程"><span class="nav-number">5.</span> <span class="nav-text">shell编程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基础-1"><span class="nav-number">5.1.</span> <span class="nav-text">基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#编程基本概念"><span class="nav-number">5.1.1.</span> <span class="nav-text">编程基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shell编程：过程式、解释执行"><span class="nav-number">5.1.2.</span> <span class="nav-text">shell编程：过程式、解释执行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加注释"><span class="nav-number">5.1.3.</span> <span class="nav-text">添加注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#脚本规范"><span class="nav-number">5.1.4.</span> <span class="nav-text">脚本规范</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量"><span class="nav-number">5.2.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#只读和位置变量"><span class="nav-number">5.2.1.</span> <span class="nav-text">只读和位置变量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运算"><span class="nav-number">5.3.</span> <span class="nav-text">运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#流程控制"><span class="nav-number">5.4.</span> <span class="nav-text">流程控制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数介绍"><span class="nav-number">5.5.</span> <span class="nav-text">函数介绍</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">Copyright &copy; 2018 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heartbeat"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hubhack.&ensp;</span>
  <span title="博客总字数"><i class="fa fa-edit"></i>&ensp;<span class="post-count"></span>字</span>

  

  
</div>


  









        







        

<!--左下角公众号二维码-->
<div class="weixin-box">
  <div class="weixin-menu">
    <div class="weixin-hover">
      <div class="weixin-description">微信扫一扫，订阅本博客</div>
    </div>
  </div>
</div>





        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    

    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  








  













  



  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/reading_progress/reading_progress.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.7.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.7.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.7.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.7.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.7.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.7.0"></script>


  

  
<script>
if ($('body').find('pre.mermaid').length) {
  $.ajax({
    type: 'GET',
    url: '//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js',
    dataType: 'script',
    cache: true,
    success: function() {
      mermaid.initialize({
        theme: 'forest',
        logLevel: 3,
        flowchart: { curve: 'linear' },
        gantt: { axisFormat: '%m/%d/%Y' },
        sequence: { actorMargin: 50 }
      });
    }
  });
}
</script>


  

  

  <!--Custom javascript for hubhack.cn-->

<!--console.log-->
<script type="text/javascript">
  console.log("欢迎来到hubhack的博客");
</script>

<!--此处为建站时间 -->

<script>
  var now = new Date(); 
  function createtime() { 
      var grt= new Date("");
      now.setTime(now.getTime()+250); 
      days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
      hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
      if(String(hnum).length ==1 ){
        hnum = "0" + hnum;
      }
      minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
      mnum = Math.floor(minutes);
      if(String(mnum).length ==1 ){
        mnum = "0" + mnum;
      } 
      seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
      snum = Math.round(seconds);
      if(String(snum).length ==1 ){
        snum = "0" + snum;
      }
      document.getElementById("timeDate").innerHTML =dnum+"&thinsp;天"; 
      document.getElementById("times").innerHTML = hnum + "&thinsp;时" + mnum + "&thinsp;分" + snum + "&thinsp;秒"; 
  } 
setInterval("createtime()",250);
</script>

<!--知乎卡片链接-->
<script type="text/javascript" src="/js/src/linkcard.js"></script>

<!--夜间模式-->
<script type="text/javascript" src="/js/src/night.js"></script>
<div class="cover"></div>

<!--崩溃欺骗-->
<!--<script type="text/javascript" src="/js/src/crash_cheat.js"></script>-->

<!--input特效-->
<script src="/js/src/activate-power-mode.js"></script>
<script>
POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = false; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script>

<!-- 鼠标点击特效 -->

 <script type="text/javascript" src="/js/src/love.js"></script>



  
  
  

  

  
  
  

  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  

  


  

  
  

  
  
  
  <script src="/lib/pangu/dist/pangu.min.js?v=3.3"></script>
  <script type="text/javascript">pangu.spacingPage();</script>


  

  

  
  
  
  <script src="/lib/bookmark/bookmark.min.js?v=1.0"></script>
  <script type="text/javascript">
  
    bookmark.scrollToMark('manual', "#更多");
  
  </script>


  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      
        background-color: #1b1b1b;
        color: #b0b0b0;
        border: 1px solid #b0b0b0;
        border-radius: 3px;
      
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 9px;
      top: 4px;
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1;
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function (i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap')
      $(e).after($wrap)
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function (e) {
        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {
          return $(e).text()
        }).toArray().join('\n')
        var ta = document.createElement('textarea')
        document.body.appendChild(ta)
        ta.style.position = 'absolute'
        ta.style.top = '0px'
        ta.style.left = '0px'
        ta.value = code
        ta.select()
        ta.focus()
        var result = document.execCommand('copy')
        document.body.removeChild(ta)
        
          if(result)$(this).text('复制成功')
          else $(this).text('复制失败')
        
        $(this).blur()
      })).on('mouseleave', function (e) {
        var $b = $(this).find('.copy-btn')
        setTimeout(function () {
          $b.text('复制')
        }, 300)
      }).append(e)
    })
  </script>


</body>
</html>
